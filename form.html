<html>
	<head>
		<title>
			Musica
		</title>
		<link href="CSS.css" rel="stylesheet" type="text/css">
		<script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
crossorigin="anonymous">
		</script>		
	</head>
	<body class="sfondo">
	<center>
		<div id="titolo">
		</div>
		<div id="tabella">
			<table>
				<tr>
					<td div id="celle"> <a div id="link" href="homepage.html"> homepage </a> </div> </div> </td>
					<td div id="celle"> <a div id="link" href="galleria.html"> galleria </div> </div> </td>
					<td div id="celle"> <a div id="link" href="strumenti.html"> strumenti </div></div> </td>
					<td div id="celle1"> <a div id="link1" href="form.html"> form </a> </div> </td>
				</tr>
			</table>
		</div>
		<div id="testo">
			<h2> Inserire i propri dati </h2>
			<br>
			<form name="richiesta" id="modulo">
				<table>
					<tr>	
			 			<td div id="form"> Nome: </div></td>
					</tr>
					<tr>
			 			<td><input type="text" id="nome" style="width: 300px" ><br><br></td>
					
					</tr>
					<tr>	
		 				<td div id="form"> Cognome: </div></td>
					</tr>
					<tr>
		 				<td><input type="text" id="cognome" style="width: 300px" ><br><br></td>
					</tr>
					<tr>	
		 				<td div id="form"> Data di nascita (gg/mm/aaaa): </div></td>
					</tr>
					<tr>
		 				<td><input type="text" id="data" style="width: 300px" /><br><br></td>
					</tr>
					<tr>
  						<td div id="form"> Gruppo musicale preferito: </div> <br> </td>
					</tr>
					<tr>
 						<td> 
							<select id="gruppo">
								<option> </option>
   								<option>  Coldplay </option>
   								<option> U2  </option>
								<option> Green Day  </option>
								<option> ACDC  </option>
								<option> Pink Floyd </option> 
  							</select>
							<br> <br>
						</td> 
					</tr>
					<tr>
						<td div id="form"> Aggiunta opzione tendina: </td>
					</tr>
					<tr>
						<td> <input type="text" id="aggiunta"></td>
					</tr>
					<tr> 
						<td> <input type="button" value="add option" id="button"> </td> 
					</tr>
					<tr>
						<td> <br> <hr> </td>
					</tr>
					<tr>
						<td> <br> <input type="reset" value="Reset">
		 				<input type="button" value="Save" style="float:right" id="button2"></td>
					</tr>
				</table>
			</form>
			<br>
			<br>
			<table id="demo" border="3" class="musica">	
			</table>
		</div>
		<div id="copyright">
		Â© 2017 sito web All Rights Reserved. Designed & Developed by Battani Gabriele
		</div>
	</center>
	<script type="text/javascript">
	$("#button2").click(function()
	{
		var nome=$("#nome").val();
		var cognome=$("#cognome").val();
		var data=$("#data").val();
		var gruppo=$("#gruppo").val();
		var espressione = /^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/;
		var giorno=data[0]+data[1];
		var mese=data[3]+data[4];
		var anno=data[6]+data[7]+data[8]+data[9];
		tro=true;
		if ((nome =="") || (nome == "undefined"))
		{
			alert("Il campo Nome e' vuoto");
			tro=false;
		}
		if ((cognome=="") || (cognome == "undefined"))
		{
			alert("Il campo Cognome e' vuoto");
			tro=false;
		}
		if((data=="") || (data == "undefined"))
		{
			alert("Il campo Data e' vuoto");
			tro=false;
		}
		else if (!espressione.test(data))
		{
			tro=false;
			alert("il formato della data e' sbagliato");
		}
		else
		{
			if(anno<1900 || anno>2017)
			{
				alert("errore, l' anno non puo' essere minore di 1900 o maggiore di 2017");
				tro=false;		
			}
			if(mese==04 || mese==06 || mese==09 || mese==11)
			{
				if(giorno<01 || giorno>30)
				{
					tro=false;
					alert("errore, il mese "+mese+" non puo' avere meno di 1 giorno e piu' di 30 giorni");
				}
			}
			else
			{
				if(giorno<01 || giorno>31)
				{
					tro=false;
					alert("errore, il mese "+mese+" non puo' avere meno di 1 giorno e piu' di 31 giorni");
				}	
			}
			if(mese==2)
				if(bisestile(anno)==false)
				{
					if(giorno<01 || giorno>28)
					{
						tro=false;
						alert("l' anno "+anno+" non e' bisestile, quindi il mese di febbraio non puo' avere meno di 1 giorno e piu' di 28 giorni");
					}
				}
				else
				{
					if(giorno<01 || giorno>29)
					{
						tro=false;
						alert("l' anno"+anno+" e' bisestile, quindi il mese non puo' avere meno di 1 giorno e piu' di 29 giorni");
					}
				}
		}	
		if((gruppo=="") || (gruppo=="undefined"))
		{
			alert("non ha selezionato nessun gruppo musicale preferito");
			tro=false;
		}
		if(tro==true)
		{
			var table=$("#demo");
			table.append("<tr> <td id='agg'> Nome  </td> <td id='agg'>"+nome+"</td> </tr>");
			table.append("<tr> <td id='agg'> Cognome </td> <td id='agg'>"+cognome+"</td> </tr>");
			table.append("<tr> <td id='agg'> Data </td> <td id='agg'>"+data+"</td> </tr>");
			table.append("<tr> <td id='agg'> Gruppo  musicale preferito </td> <td id='agg'>"+gruppo+"</td> </tr>");
		}
	})        
	$("#button").click(function()
	{
		var aggiunta=$("#aggiunta").val();
		if((aggiunta=="") || (aggiunta=="undefined"))
		{
			alert("il campo add option e' vuoto");
		}
		else{	
			var x=$("#gruppo");
			x.append("<option>"+aggiunta+"</option>");
			alert("il gruppo musicale e' stato aggiunto alle opzioni");					
		}	
	})
	function bisestile(year)
	{
		if(year%4==0)
		{
			if(year%100==0)
			{
				if(year%400==0)
				{
					return true;
				}
				else
				{
					return false;
				}
			}
		}
		else
		{
			return false;
		}
	}		
	</script>
	</body>
</html>
